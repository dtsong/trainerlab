@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 266 17% 8%;
    --foreground: 266 33% 91%;
    --card: 264 16% 12%;
    --card-foreground: 266 33% 91%;
    --popover: 264 16% 12%;
    --popover-foreground: 266 33% 91%;
    --primary: 28 87% 62%;
    --primary-foreground: 0 0% 100%;
    --secondary: 264 19% 11%;
    --secondary-foreground: 266 33% 91%;
    --muted: 264 19% 11%;
    --muted-foreground: 258 11% 46%;
    --accent: 264 19% 11%;
    --accent-foreground: 266 33% 91%;
    --destructive: 0 100% 71%;
    --destructive-foreground: 0 0% 100%;
    --border: 262 17% 19%;
    --input: 262 17% 19%;
    --ring: 28 87% 62%;
    --radius: 0.5rem;

    /* Teal scale (primary brand) */
    --teal-50: 166 76% 97%;
    --teal-100: 167 85% 89%;
    --teal-200: 168 84% 78%;
    --teal-300: 171 77% 64%;
    --teal-400: 172 66% 50%;
    --teal-500: 173 80% 40%;
    --teal-600: 175 84% 32%;
    --teal-700: 175 77% 26%;
    --teal-800: 176 69% 22%;
    --teal-900: 176 61% 19%;
    --teal-950: 179 84% 10%;

    /* Amber scale (accent/warning) */
    --amber-50: 48 100% 96%;
    --amber-500: 38 92% 50%;
    --amber-600: 32 95% 44%;

    /* Parchment (editorial backgrounds) */
    --parchment-50: 48 100% 98%;
    --parchment-100: 48 96% 95%;
    --parchment-200: 48 89% 91%;

    /* Archetype colors (from SPEC.md) */
    --archetype-fire: 0 84% 60%;
    --archetype-water: 217 91% 60%;
    --archetype-lightning: 45 93% 47%;
    --archetype-psychic: 271 91% 65%;
    --archetype-fighting: 25 95% 53%;
    --archetype-darkness: 239 84% 67%;
    --archetype-metal: 220 9% 46%;
    --archetype-grass: 142 71% 45%;
    --archetype-dragon: 258 90% 66%;
    --archetype-colorless: 240 5% 65%;
    --archetype-fairy: 330 81% 60%;

    /* Tier colors */
    --tier-s: 45 93% 56%;
    --tier-a: 173 58% 39%;
    --tier-b: 217 91% 60%;
    --tier-c: 220 9% 46%;
    --tier-rogue: 258 90% 66%;

    /* Signal colors */
    --signal-up: 142 71% 45%;
    --signal-down: 0 84% 60%;
    --signal-stable: 220 9% 46%;
    --signal-jp: 347 91% 62%;

    /* Terminal panel */
    --terminal-bg: 213 33% 8%;
    --terminal-surface: 213 20% 13%;
    --terminal-border: 213 13% 20%;
    --terminal-text: 210 29% 90%;
    --terminal-muted: 212 9% 50%;
    --terminal-accent: 173 58% 39%;

    /* Lab backgrounds (warm darks) */
    --lab-bg: #141118;
    --lab-warm: #1a1620;
    --lab-panel: #1e1a24;
    --lab-panel-hover: #252030;
    --lab-header: #16131c;

    /* Lab borders */
    --lab-border: #2e2838;
    --lab-border-light: #3a3345;
    --lab-border-focus: #4a4355;

    /* Flame (primary accent) */
    --flame: #f2994a;
    --flame-light: #ffb672;
    --flame-dim: #cc7a30;
    --flame-muted: #f2994a20;

    /* Lab teal (secondary) */
    --lab-teal: #5eddd5;
    --lab-teal-dim: #3bb5ae;
    --lab-teal-muted: #5eddd520;

    /* JP signal */
    --jp: #ff6b6b;
    --jp-dim: #cc5555;
    --jp-muted: #ff6b6b15;

    /* Lab text hierarchy */
    --lab-text: #e8e2f0;
    --lab-text-soft: #b0a8bc;
    --lab-text-muted: #706882;
    --lab-text-dim: #4a4058;

    /* Font families (with fallbacks for when Next.js font vars aren't loaded) */
    --font-display: var(
      --font-space-grotesk,
      "DM Sans",
      system-ui,
      sans-serif
    );
    --font-sans: var(--font-dm-sans, system-ui, -apple-system, sans-serif);
    --font-mono: var(
      --font-jetbrains-mono,
      ui-monospace,
      "Cascadia Code",
      monospace
    );

    /* Notebook palette (Field Notebook aesthetic) */
    --notebook-cream: 45 30% 97%;
    --notebook-grid: 40 15% 88%;
    --notebook-aged: 42 25% 93%;
    --ink-black: 0 0% 17%;
    --ink-red: 0 70% 48%;
    --pencil-gray: 0 0% 42%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;

    /* Teal scale (same for dark) */
    --teal-50: 166 76% 97%;
    --teal-100: 167 85% 89%;
    --teal-200: 168 84% 78%;
    --teal-300: 171 77% 64%;
    --teal-400: 172 66% 50%;
    --teal-500: 173 80% 40%;
    --teal-600: 175 84% 32%;
    --teal-700: 175 77% 26%;
    --teal-800: 176 69% 22%;
    --teal-900: 176 61% 19%;
    --teal-950: 179 84% 10%;

    /* Amber scale */
    --amber-50: 48 100% 96%;
    --amber-500: 38 92% 50%;
    --amber-600: 32 95% 44%;

    /* Parchment */
    --parchment-50: 48 100% 98%;
    --parchment-100: 48 96% 95%;
    --parchment-200: 48 89% 91%;

    /* Archetype colors (from SPEC.md) */
    --archetype-fire: 0 84% 60%;
    --archetype-water: 217 91% 60%;
    --archetype-lightning: 45 93% 47%;
    --archetype-psychic: 271 91% 65%;
    --archetype-fighting: 25 95% 53%;
    --archetype-darkness: 239 84% 67%;
    --archetype-metal: 220 9% 46%;
    --archetype-grass: 142 71% 45%;
    --archetype-dragon: 258 90% 66%;
    --archetype-colorless: 240 5% 65%;
    --archetype-fairy: 330 81% 60%;

    /* Tier colors */
    --tier-s: 45 93% 56%;
    --tier-a: 173 58% 39%;
    --tier-b: 217 91% 60%;
    --tier-c: 220 9% 46%;
    --tier-rogue: 258 90% 66%;

    /* Signal colors */
    --signal-up: 142 71% 45%;
    --signal-down: 0 84% 60%;
    --signal-stable: 220 9% 46%;
    --signal-jp: 347 91% 62%;

    /* Terminal panel */
    --terminal-bg: 213 33% 8%;
    --terminal-surface: 213 20% 13%;
    --terminal-border: 213 13% 20%;
    --terminal-text: 210 29% 90%;
    --terminal-muted: 212 9% 50%;
    --terminal-accent: 173 58% 39%;

    /* Notebook palette (Field Notebook aesthetic) */
    --notebook-cream: 45 30% 97%;
    --notebook-grid: 40 15% 88%;
    --notebook-aged: 42 25% 93%;
    --ink-black: 0 0% 17%;
    --ink-red: 0 70% 48%;
    --pencil-gray: 0 0% 42%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer utilities {
  /* iOS safe area padding */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Dot grid pattern for notebook aesthetic */
  .bg-dot-grid {
    background-image: radial-gradient(
      circle,
      hsl(var(--notebook-grid)) 1px,
      transparent 1px
    );
    background-size: 20px 20px;
  }

  /* Larger dot grid for more subtle effect */
  .bg-dot-grid-lg {
    background-image: radial-gradient(
      circle,
      hsl(var(--notebook-grid)) 1px,
      transparent 1px
    );
    background-size: 32px 32px;
  }

  /* Subtle paper noise texture */
  .bg-paper-texture {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
  }

  /* Ruled notebook lines */
  .bg-ruled-lines {
    background-image: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 23px,
      hsl(var(--notebook-grid)) 23px,
      hsl(var(--notebook-grid)) 24px
    );
    background-size: 100% 24px;
    background-position: 0 0;
  }

  /* Red margin line (notebook style) */
  .border-margin-red {
    border-left: 2px solid hsl(var(--ink-red) / 0.5);
    padding-left: 1rem;
    margin-left: 1.5rem;
  }

  /* Tape effect for pinned items */
  .tape-effect::before {
    content: "";
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 16px;
    background: linear-gradient(
      to bottom,
      hsl(48 100% 90% / 0.8),
      hsl(48 60% 85% / 0.6)
    );
    border-radius: 2px;
    box-shadow: 0 1px 2px hsl(0 0% 0% / 0.1);
  }

  /* Pushpin effect */
  .pushpin::before {
    content: "";
    position: absolute;
    top: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 12px;
    height: 12px;
    background: radial-gradient(
      circle at 30% 30%,
      hsl(var(--ink-red)),
      hsl(0 70% 35%)
    );
    border-radius: 50%;
    box-shadow:
      0 2px 4px hsl(0 0% 0% / 0.3),
      inset 0 1px 2px hsl(0 0% 100% / 0.3);
  }

  /* Paper clip effect */
  .paper-clip::before {
    content: "";
    position: absolute;
    top: -4px;
    right: 12px;
    width: 20px;
    height: 32px;
    border: 2px solid hsl(220 9% 60%);
    border-radius: 10px 10px 0 0;
    background: transparent;
    transform: rotate(15deg);
    z-index: 10;
  }
}

/* Card shuffle and float animations */
@keyframes float-gentle {
  0%,
  100% {
    transform: translateY(0) rotate(var(--float-rotate, 0deg));
  }
  50% {
    transform: translateY(-8px) rotate(calc(var(--float-rotate, 0deg) + 1deg));
  }
}

@keyframes sway-pinned {
  0%,
  100% {
    transform: rotate(var(--sway-base, 0deg));
  }
  25% {
    transform: rotate(calc(var(--sway-base, 0deg) + 1.5deg));
  }
  75% {
    transform: rotate(calc(var(--sway-base, 0deg) - 1deg));
  }
}

@keyframes shuffle-peek {
  0%,
  85%,
  100% {
    transform: translateX(0) translateY(0) rotate(var(--shuffle-rotate, 0deg));
  }
  90% {
    transform: translateX(calc(var(--shuffle-x, 5px))) translateY(-12px)
      rotate(calc(var(--shuffle-rotate, 0deg) + 3deg));
  }
  95% {
    transform: translateX(calc(var(--shuffle-x, 5px) * -0.5)) translateY(-6px)
      rotate(calc(var(--shuffle-rotate, 0deg) - 1deg));
  }
}

@keyframes tape-wiggle {
  0%,
  100% {
    transform: translateX(-50%) rotate(0deg);
  }
  25% {
    transform: translateX(-50%) rotate(0.5deg);
  }
  75% {
    transform: translateX(-50%) rotate(-0.5deg);
  }
}

@keyframes paper-rustle {
  0%,
  100% {
    transform: rotate(var(--rustle-base, 0deg)) scale(1);
  }
  50% {
    transform: rotate(calc(var(--rustle-base, 0deg) + 0.3deg)) scale(1.002);
  }
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes draw-underline {
  from {
    stroke-dashoffset: 200;
  }
  to {
    stroke-dashoffset: 0;
  }
}

@layer utilities {
  /* Animation utility classes */
  .animate-float-gentle {
    animation: float-gentle 6s ease-in-out infinite;
  }

  .animate-sway-pinned {
    animation: sway-pinned 8s ease-in-out infinite;
  }

  .animate-shuffle-peek {
    animation: shuffle-peek 12s ease-in-out infinite;
  }

  .animate-tape-wiggle {
    animation: tape-wiggle 4s ease-in-out infinite;
  }

  .animate-paper-rustle {
    animation: paper-rustle 5s ease-in-out infinite;
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.6s ease-out forwards;
  }

  .animate-draw-underline {
    stroke-dasharray: 200;
    stroke-dashoffset: 200;
    animation: draw-underline 1s ease-out 0.5s forwards;
  }

  /* Animation delays for staggering */
  .animation-delay-100 {
    animation-delay: 0.1s;
  }
  .animation-delay-200 {
    animation-delay: 0.2s;
  }
  .animation-delay-300 {
    animation-delay: 0.3s;
  }
  .animation-delay-500 {
    animation-delay: 0.5s;
  }
  .animation-delay-700 {
    animation-delay: 0.7s;
  }
  .animation-delay-1000 {
    animation-delay: 1s;
  }
  .animation-delay-2000 {
    animation-delay: 2s;
  }
  .animation-delay-3000 {
    animation-delay: 3s;
  }
}

@keyframes lab-pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.3;
  }
}

@layer utilities {
  .animate-lab-pulse {
    animation: lab-pulse 2.5s ease-in-out infinite;
  }
}
